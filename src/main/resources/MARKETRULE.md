营销计算规则
1、抹零
    抹零规则:  
    1.抹零是针对所有商品、服务、计次卡
    2.只要待支付金额不为0,就可以使用抹零
    3.抹零可以在使用优惠券之后使用
    4.抹零可以在使用体验劵之后使用
    5.抹零可以在使用活动之后使用
    6.抹零可以在使用其他营销之后使用
    7.抹零均摊--->商品、服务议价优先级大于会员价、子订单优惠折扣金额不能大于子订单待支付金额
    8.抹零均摊---->抹零均摊精度需要默认保持在最后一个子订单上
    9.抹零均摊---->计算金额符合0.99999998或者0.00000001两个极端精度问题需要进行进位【只针对计算过程中的金额】
    10.针对所有用户
2、体验劵
   体验劵规则:
   1.体验劵只能针对服务类商品
   2.如果使用任何其他的优惠则不能使用体验劵 
   3.体验劵只能针对对应的服务使用
   4.如果使用了体验劵则子订单不能使用其他的优惠
   5.如果使用了体验劵则子订单不能使用次卡
   6.如果使用了次卡则子订单不能使用体验劵
   7.体验劵劵面金额是抵扣金额,体验劵本身价格是需要算入待支付金额里边
   8.只针对会员
   9.在有效时间内有效
3、满减劵
   满减劵规则:
   1.服务类商品子订单使用体验劵之后不能使用满减劵
   2.服务类商品子订单使用满减劵OR抹零OR活动OR其他劵类之后不能使用体验劵
   3.服务类商品子订单使用了满减劵,若待支付金额不为0则不可以继续使用其他劵类或者抹零
   4.商品类商品子订单使用了满减劵,若待支付金额不为0则不可以继续使用其他劵类或者抹零
   5.满减劵排除某个服务或者商品,其他商品或者服务类都可以使用
   6.满减劵只有某个商品或者服务,其他商品或者服务类都不可以使用
   7.满减劵针对所有的商品或者服务都可以使用
   8.满减劵均摊------>计算金额符合0.999999998或者0.00000001两个极端精度问题则需要进行进位【只针对计算过程中的金额】
   9.满减劵均摊------>优惠券均摊精度需要默认保持在最后一个子订单上
   10.满减劵均摊----->商品、服务议价优先级大于会员价、子订单优惠折扣金额不能大于子订单待支付金额
   11.只针对会员
   12.在有效时间内有效
4、议价
   议价规则:
   1.议价只针对商品类
   2.议价优先级大于会员价优先级
   3.议价议成0 则表明商品为赠送商品
   4.议价是针对单个商品的单价
   5.针对所有用户
5、折扣劵
   折扣规则:
   1.折扣劵只针对商品
   2.如果商品类子订单使用满减劵或者其他折扣活动之后不能使用折扣劵
   3.如果商品类子订单使用了体验劵OR满减劵OR抹零OR活动OR其他劵类之后不能使用折扣劵
   4.如果商品类子订单使用了折扣劵,若待支付金额不为0则不可以继续使用其他劵类或者抹零
   5.折扣劵只能针对某个范围内的商品有效
   6.折扣劵只能在有效时间内有效
   7.折扣均摊----->计算金额符合0.99999998和0.00000001两个极端精度问题则需要进行进位【只针对计算过程中的金额】
   8.折扣均摊----->折扣劵均摊精度需要默认保持在参与商品的最后一个子订单上
   9.折扣均摊----->商品优先级大于会员价、子订单优惠折扣金额不能大于子订单待支付金额
   10.只针对会员
   
    
          
       